import Ct from"./Icon.d3a9392d.js";import{v as Dt,_ as Tt,a as Ot}from"./v4.3a81ebd7.js";import{u as Zt,a as ct}from"./vee-validate.esm.8c3564f4.js";import{D as _e,a as Se,C as Xt,b as He,c as en,g as tn,d as nn}from"./appwrite.a78840d9.js";import{u as ft}from"./useQuery.3635eb87.js";import{L as rn,M as an,f as N,r as T,E as C,o as O,c as P,a as W,H as Ee,j as _,b as A,m as pe,k as xe,t as K,n as J,w as H,d as me,l as Le,I as Ce,_ as Qe,q as re,N as on,O as ln,J as rt,P as sn,Q as un,R as Xe,S as pt,T as ze,U as at,V as dn,W as cn,X as fn,G,Y as ae,Z as se,$ as oe,F as ne,a0 as ue,i as je,a1 as pn,a2 as xt,a3 as mn,a4 as vn,a5 as Ie,a6 as hn,a7 as gn}from"./entry.4f10bab2.js";import{c as De,u as yn}from"./index.d52611df.js";import{u as bn,a as $n}from"./auth.store.ff8ecbdb.js";import"./index.df58e121.js";var wn=rn(an);function _n(e,t){const n={...e};for(const r of t)delete n[r];return n}function Sn(e,t,n){typeof t=="string"&&(t=t.split(".").map(a=>{const o=Number(a);return isNaN(o)?a:o}));let r=e;for(const a of t){if(r==null)return n;r=r[a]}return r!==void 0?r:n}const En={class:"text-center mb-2"},Cn=["disabled"],Dn=N({__name:"CreateDeal",props:{status:{type:String,default:""},refetch:{type:Function}},setup(e){const t=T(!1),n=T(""),r=T(!1),a=e,{handleSubmit:o,defineField:l,handleReset:s}=Zt({initialValues:{status:a.status}}),{data:u,isLoading:i}=ft({queryKey:["customers"],queryFn:()=>_e.listDocuments(Se,Xt)}),m=U=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U),h=U=>U>0,[$,v]=l("name"),[g,D]=l("price"),[M,Z]=l("customers.email"),[j,q]=l("customers.name");l("customers");const{mutate:le,isPending:z}=ct({mutationKey:["create a new deal"],mutationFn:U=>_e.createDocument(Se,He,Dt(),U),onSuccess(){a.refetch&&a.refetch(),s()}}),V=C(()=>!j.value||!$.value||!g.value||!M.value),Y=o(U=>{var E;const k=(E=u.value)==null?void 0:E.documents.find(S=>S.email===M.value);m(M.value)&&h(g.value)&&!k?le(U):(r.value=!0,setTimeout(()=>{r.value=!1},5e3),m(M.value)?h(g.value)?k&&(n.value="Customer can only have one deal"):n.value="Provide valid price":n.value="Provide valid email")});return(U,k)=>{const E=Ct,S=Tt,X=Ot;return O(),P(Ce,null,[W("div",En,[W("button",{class:"transition-all opacity-5 hover:opacity-100 hover:text-[#a252c8]",onClick:k[0]||(k[0]=F=>t.value=!t.value)},[t.value?(O(),Ee(E,{key:0,name:"radix-icons:arrow-up",class:"fade-in-100 fade-out-0",size:"35"})):(O(),Ee(E,{key:1,name:"radix-icons:plus-circled",class:"fade-in-100 fade-out-0",size:"35"}))])]),t.value?(O(),P("form",{key:0,onSubmit:k[5]||(k[5]=(...F)=>_(Y)&&_(Y)(...F)),class:"form"},[A(S,pe({placeholder:"Title",modelValue:_($),"onUpdate:modelValue":k[1]||(k[1]=F=>xe($)?$.value=F:null)},_(v),{type:"text",class:"input"}),null,16,["modelValue"]),A(S,pe({placeholder:"Price",modelValue:_(g),"onUpdate:modelValue":k[2]||(k[2]=F=>xe(g)?g.value=F:null)},_(D),{type:"number",class:"input"}),null,16,["modelValue"]),A(S,pe({placeholder:"Email",modelValue:_(M),"onUpdate:modelValue":k[3]||(k[3]=F=>xe(M)?M.value=F:null)},_(Z),{type:"email",class:"input"}),null,16,["modelValue"]),A(S,pe({placeholder:"Company",modelValue:_(j),"onUpdate:modelValue":k[4]||(k[4]=F=>xe(j)?j.value=F:null)},_(q),{type:"text",class:"input"}),null,16,["modelValue"]),W("button",{class:J(["btn",{"opacity-80":_(V)}]),disabled:_(z)||_(V)},K(_(z)?"Loading...":"Add"),11,Cn),A(X,{class:J([{"opacity-100":r.value},"text-[#ffffff] bg-[#ff0000] mx-auto mt-4 max-w-xs transition-opacity opacity-0 text-center"]),variant:"outline"},{default:H(()=>[me(K(n.value),1)]),_:1},8,["class"])],32)):Le("",!0)],64)}}});const Tn=Qe(Dn,[["__scopeId","data-v-03ac6ce8"]]),On=N({__name:"Card",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("div",{class:J(_(De)("rounded-lg bg-card text-card-foreground animation border border-transparent transition-colors hover:border-[#a252c83d]",t.class))},[re(n.$slots,"default",{},void 0,!0)],2))}});const xn=Qe(On,[["__scopeId","data-v-ffcd68b3"]]),Ln=N({__name:"CardHeader",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("div",{class:J(_(De)("flex flex-col space-y-1.5 p-3",t.class))},[re(n.$slots,"default")],2))}}),Mn=N({__name:"CardTitle",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("h3",{class:J(_(De)("text-xl font-semibold leading-none tracking-tighter",t.class))},[re(n.$slots,"default")],2))}}),kn=N({__name:"CardDescription",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("p",{class:J(_(De)("text-sm text-muted-foreground",t.class))},[re(n.$slots,"default")],2))}}),Fn=N({__name:"CardContent",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("div",{class:J(_(De)("p-3 pt-0",t.class))},[re(n.$slots,"default")],2))}}),An=N({__name:"CardFooter",props:{class:{type:String,default:""}},setup(e){const t=e;return(n,r)=>(O(),P("div",{class:J(_(De)("p-3 pt-0 text-xs opacity-70 italic",t.class))},[re(n.$slots,"default")],2))}}),Pn={class:"mb-3"},Nn={key:0,class:"opacity-75 mb-0.5 block text-xs"},Hn={class:"text-base"},jn=N({__name:"Label",props:{labelText:{type:String,default:""}},setup(e){return(t,n)=>(O(),P("div",Pn,[e.labelText?(O(),P("label",Nn,K(e.labelText),1)):Le("",!0),W("div",Hn,[re(t.$slots,"default")])]))}}),Rn=e=>new Intl.NumberFormat("us-US",{style:"currency",currency:"DOL"}).format(+e);var Lt={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(en,function(){var n=1e3,r=6e4,a=36e5,o="millisecond",l="second",s="minute",u="hour",i="day",m="week",h="month",$="quarter",v="year",g="date",D="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var p=["th","st","nd","rd"],f=w%100;return"["+w+(p[(f-20)%10]||p[f]||p[0])+"]"}},q=function(w,p,f){var c=String(w);return!c||c.length>=p?w:""+Array(p+1-c.length).join(f)+w},le={s:q,z:function(w){var p=-w.utcOffset(),f=Math.abs(p),c=Math.floor(f/60),d=f%60;return(p<=0?"+":"-")+q(c,2,"0")+":"+q(d,2,"0")},m:function w(p,f){if(p.date()<f.date())return-w(f,p);var c=12*(f.year()-p.year())+(f.month()-p.month()),d=p.clone().add(c,h),y=f-d<0,b=p.clone().add(c+(y?-1:1),h);return+(-(c+(f-d)/(y?d-b:b-d))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:h,y:v,w:m,d:i,D:g,h:u,m:s,s:l,ms:o,Q:$}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},z="en",V={};V[z]=j;var Y="$isDayjsObject",U=function(w){return w instanceof X||!(!w||!w[Y])},k=function w(p,f,c){var d;if(!p)return z;if(typeof p=="string"){var y=p.toLowerCase();V[y]&&(d=y),f&&(V[y]=f,d=y);var b=p.split("-");if(!d&&b.length>1)return w(b[0])}else{var x=p.name;V[x]=p,d=x}return!c&&d&&(z=d),d||!c&&z},E=function(w,p){if(U(w))return w.clone();var f=typeof p=="object"?p:{};return f.date=w,f.args=arguments,new X(f)},S=le;S.l=k,S.i=U,S.w=function(w,p){return E(w,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var X=function(){function w(f){this.$L=k(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[Y]=!0}var p=w.prototype;return p.parse=function(f){this.$d=function(c){var d=c.date,y=c.utc;if(d===null)return new Date(NaN);if(S.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var b=d.match(M);if(b){var x=b[2]-1||0,L=(b[7]||"0").substring(0,3);return y?new Date(Date.UTC(b[1],x,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)):new Date(b[1],x,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)}}return new Date(d)}(f),this.init()},p.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},p.$utils=function(){return S},p.isValid=function(){return this.$d.toString()!==D},p.isSame=function(f,c){var d=E(f);return this.startOf(c)<=d&&d<=this.endOf(c)},p.isAfter=function(f,c){return E(f)<this.startOf(c)},p.isBefore=function(f,c){return this.endOf(c)<E(f)},p.$g=function(f,c,d){return S.u(f)?this[c]:this.set(d,f)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(f,c){var d=this,y=!!S.u(c)||c,b=S.p(f),x=function(ge,Q){var ce=S.w(d.$u?Date.UTC(d.$y,Q,ge):new Date(d.$y,Q,ge),d);return y?ce:ce.endOf(i)},L=function(ge,Q){return S.w(d.toDate()[ge].apply(d.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(Q)),d)},R=this.$W,I=this.$M,te=this.$D,Te="set"+(this.$u?"UTC":"");switch(b){case v:return y?x(1,0):x(31,11);case h:return y?x(1,I):x(0,I+1);case m:var he=this.$locale().weekStart||0,ke=(R<he?R+7:R)-he;return x(y?te-ke:te+(6-ke),I);case i:case g:return L(Te+"Hours",0);case u:return L(Te+"Minutes",1);case s:return L(Te+"Seconds",2);case l:return L(Te+"Milliseconds",3);default:return this.clone()}},p.endOf=function(f){return this.startOf(f,!1)},p.$set=function(f,c){var d,y=S.p(f),b="set"+(this.$u?"UTC":""),x=(d={},d[i]=b+"Date",d[g]=b+"Date",d[h]=b+"Month",d[v]=b+"FullYear",d[u]=b+"Hours",d[s]=b+"Minutes",d[l]=b+"Seconds",d[o]=b+"Milliseconds",d)[y],L=y===i?this.$D+(c-this.$W):c;if(y===h||y===v){var R=this.clone().set(g,1);R.$d[x](L),R.init(),this.$d=R.set(g,Math.min(this.$D,R.daysInMonth())).$d}else x&&this.$d[x](L);return this.init(),this},p.set=function(f,c){return this.clone().$set(f,c)},p.get=function(f){return this[S.p(f)]()},p.add=function(f,c){var d,y=this;f=Number(f);var b=S.p(c),x=function(I){var te=E(y);return S.w(te.date(te.date()+Math.round(I*f)),y)};if(b===h)return this.set(h,this.$M+f);if(b===v)return this.set(v,this.$y+f);if(b===i)return x(1);if(b===m)return x(7);var L=(d={},d[s]=r,d[u]=a,d[l]=n,d)[b]||1,R=this.$d.getTime()+f*L;return S.w(R,this)},p.subtract=function(f,c){return this.add(-1*f,c)},p.format=function(f){var c=this,d=this.$locale();if(!this.isValid())return d.invalidDate||D;var y=f||"YYYY-MM-DDTHH:mm:ssZ",b=S.z(this),x=this.$H,L=this.$m,R=this.$M,I=d.weekdays,te=d.months,Te=d.meridiem,he=function(Q,ce,Fe,Ve){return Q&&(Q[ce]||Q(c,y))||Fe[ce].slice(0,Ve)},ke=function(Q){return S.s(x%12||12,Q,"0")},ge=Te||function(Q,ce,Fe){var Ve=Q<12?"AM":"PM";return Fe?Ve.toLowerCase():Ve};return y.replace(Z,function(Q,ce){return ce||function(Fe){switch(Fe){case"YY":return String(c.$y).slice(-2);case"YYYY":return S.s(c.$y,4,"0");case"M":return R+1;case"MM":return S.s(R+1,2,"0");case"MMM":return he(d.monthsShort,R,te,3);case"MMMM":return he(te,R);case"D":return c.$D;case"DD":return S.s(c.$D,2,"0");case"d":return String(c.$W);case"dd":return he(d.weekdaysMin,c.$W,I,2);case"ddd":return he(d.weekdaysShort,c.$W,I,3);case"dddd":return I[c.$W];case"H":return String(x);case"HH":return S.s(x,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return ge(x,L,!0);case"A":return ge(x,L,!1);case"m":return String(L);case"mm":return S.s(L,2,"0");case"s":return String(c.$s);case"ss":return S.s(c.$s,2,"0");case"SSS":return S.s(c.$ms,3,"0");case"Z":return b}return null}(Q)||b.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(f,c,d){var y,b=this,x=S.p(c),L=E(f),R=(L.utcOffset()-this.utcOffset())*r,I=this-L,te=function(){return S.m(b,L)};switch(x){case v:y=te()/12;break;case h:y=te();break;case $:y=te()/3;break;case m:y=(I-R)/6048e5;break;case i:y=(I-R)/864e5;break;case u:y=I/a;break;case s:y=I/r;break;case l:y=I/n;break;default:y=I}return d?y:S.a(y)},p.daysInMonth=function(){return this.endOf(h).$D},p.$locale=function(){return V[this.$L]},p.locale=function(f,c){if(!f)return this.$L;var d=this.clone(),y=k(f,c,!0);return y&&(d.$L=y),d},p.clone=function(){return S.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},w}(),F=X.prototype;return E.prototype=F,[["$ms",o],["$s",l],["$m",s],["$H",u],["$W",i],["$M",h],["$y",v],["$D",g]].forEach(function(w){F[w[1]]=function(p){return this.$g(p,w[0],w[1])}}),E.extend=function(w,p){return w.$i||(w(p,X,E),w.$i=!0),E},E.locale=k,E.isDayjs=U,E.unix=function(w){return E(1e3*w)},E.en=V[z],E.Ls=V,E.p={},E})})(Lt);var Un=Lt.exports;const mt=tn(Un),$t={card:null,isOpen:!1},Re=on("deal-slide",{state:()=>$t,actions:{clear(){this.$patch($t)},set(e){this.$patch({card:e,isOpen:!0})},toggle(){this.isOpen=!this.isOpen}}}),Bn={class:"border-border bg-black/20 rounded p-3"},Vn=W("div",{class:"uppercase bold text-xl mb-4"},"About the deal",-1),In=N({__name:"Top",setup(e){const t=Re();return(n,r)=>{const a=jn,o=Ot;return O(),P("div",Bn,[Vn,A(a,{"label-text":"Title"},{default:H(()=>{var l;return[W("h2",null,K((l=_(t).card)==null?void 0:l.name),1)]}),_:1}),A(a,{"label-text":"Price"},{default:H(()=>{var l;return[me(K(("convertCurrency"in n?n.convertCurrency:_(Rn))(((l=_(t).card)==null?void 0:l.price)||0)),1)]}),_:1}),A(a,{"label-text":"Status"},{default:H(()=>[A(o,{variant:"outline"},{default:H(()=>{var l;return[me(K((l=_(t).card)==null?void 0:l.status),1)]}),_:1})]),_:1}),A(a,{"label-text":"Client"},{default:H(()=>{var l;return[me(K((l=_(t).card)==null?void 0:l.companyName),1)]}),_:1}),A(a,{"label-text":"Date of creation"},{default:H(()=>{var l;return[me(K(_(mt)((l=_(t).card)==null?void 0:l.$createdAt).format("DD MMMM YYYY")),1)]}),_:1})])}}}),Wn=N({__name:"Skeleton",props:{class:{}},setup(e){const t=e;return(n,r)=>(O(),P("div",{class:J(_(De)("animate-pulse rounded-md bg-secondary",t.class))},null,2))}});function Yn(){var n;const t=((n=Re().card)==null?void 0:n.id)||"";return ft({queryKey:["deal",t],queryFn:()=>_e.getDocument(Se,He,t)})}function Kn({refetch:e}){const t=Re(),n=T(),{mutate:r}=ct({mutationKey:["add comments",n.value],mutationFn:()=>{var o;return _e.createDocument(Se,nn,Dt(),{text:n.value,deal:(o=t.card)==null?void 0:o.id})},onSuccess:()=>{e(),n.value=""}});return{writeComment:()=>{n.value&&r()},commentRef:n}}const qn={key:1},zn={class:"border-border bg-black/20 rounded p-3 w-full"},Gn={class:"mb-2 text-sm"},Jn=N({__name:"Comments",setup(e){const{data:t,refetch:n,isLoading:r}=Yn(),{commentRef:a,writeComment:o}=Kn({refetch:n}),l=t;return(s,u)=>{var $;const i=Tt,m=Wn,h=Ct;return O(),P(Ce,null,[A(i,{placeholder:"Leave the comment here",modelValue:_(a),"onUpdate:modelValue":u[0]||(u[0]=v=>xe(a)?a.value=v:null),onKeyup:ln(_(o),["enter"])},null,8,["modelValue","onKeyup"]),_(r)?(O(),Ee(m,{key:0,class:"w-full h-[76px] rounded mt-5"})):_(l)?(O(),P("div",qn,[(O(!0),P(Ce,null,rt(($=_(l))==null?void 0:$.comments,v=>(O(),P("div",{key:v.$id,class:"flex items-start mt-5"},[A(h,{name:"radix-icons:chat-bubble",class:"mr-3 mt-1",size:"20"}),W("div",zn,[W("div",Gn," Comment "+K(_(mt)(v.$createdAt).format("HH:mm")),1),W("p",null,K(v.text),1)])]))),128))])):Le("",!0)],64)}}}),Mt=(e,t,n,r,a=!1)=>{const o=sn(),l=un(),s=C(()=>{var $;const i=Xe(t),m=Xe(n),h=Xe(r);return pt((i==null?void 0:i.strategy)||(($=l.ui)==null?void 0:$.strategy),h?{wrapper:h}:{},i||{},a?Sn(l.ui,e,{}):{},m||{})}),u=C(()=>_n(o,["class"]));return{ui:s,attrs:u}},Qn={base:"overflow-hidden",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}},Zn={wrapper:"fixed inset-0 flex z-50",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},base:"relative flex-1 flex flex-col w-full focus:outline-none",background:"bg-white dark:bg-gray-900",ring:"",rounded:"",padding:"",shadow:"shadow-xl",width:"w-screen max-w-md",transition:{enter:"transform transition ease-in-out duration-300",leave:"transform transition ease-in-out duration-200"}},Xn=pt(ze.ui.strategy,ze.ui.card,Qn),er=N({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},setup(e){const{ui:t,attrs:n}=Mt("card",at(e,"ui"),Xn),r=C(()=>wn(dn(t.value.base,t.value.rounded,t.value.divide,t.value.ring,t.value.shadow,t.value.background),e.class));return{ui:t,attrs:n,cardClass:r}}});function tr(e,t,n,r,a,o){return O(),Ee(cn(e.$attrs.onSubmit?"form":e.as),pe({class:e.cardClass},e.attrs),{default:H(()=>[e.$slots.header?(O(),P("div",{key:0,class:J([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[re(e.$slots,"header")],2)):Le("",!0),W("div",{class:J([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[re(e.$slots,"default")],2),e.$slots.footer?(O(),P("div",{key:1,class:J([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[re(e.$slots,"footer")],2)):Le("",!0)]),_:3},16,["class"])}const nr=Qe(er,[["render",tr]]);function ie(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ie),r}var Ge=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ge||{}),ve=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ve||{});function de({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...a}){var o;let l=Ft(r,n),s=Object.assign(a,{props:l});if(e||t&2&&l.static)return et(s);if(t&1){let u=(o=l.unmount)==null||o?0:1;return ie(u,{0(){return null},1(){return et({...a,props:{...l,hidden:!0,style:{display:"none"}}})}})}return et(s)}function et({props:e,attrs:t,slots:n,slot:r,name:a}){var o,l;let{as:s,...u}=At(e,["unmount","static"]),i=(o=n.default)==null?void 0:o.call(n,r),m={};if(r){let h=!1,$=[];for(let[v,g]of Object.entries(r))typeof g=="boolean"&&(h=!0),g===!0&&$.push(v);h&&(m["data-headlessui-state"]=$.join(" "))}if(s==="template"){if(i=kt(i??[]),Object.keys(u).length>0||Object.keys(t).length>0){let[h,...$]=i??[];if(!rr(h)||$.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(t)).map(D=>D.trim()).filter((D,M,Z)=>Z.indexOf(D)===M).sort((D,M)=>D.localeCompare(M)).map(D=>`  - ${D}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(D=>`  - ${D}`).join(`
`)].join(`
`));let v=Ft((l=h.props)!=null?l:{},u),g=fn(h,v);for(let D in v)D.startsWith("on")&&(g.props||(g.props={}),g.props[D]=v[D]);return g}return Array.isArray(i)&&i.length===1?i[0]:i}return G(s,Object.assign({},u,m),{default:()=>i})}function kt(e){return e.flatMap(t=>t.type===Ce?kt(t.children):[t])}function Ft(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...o){let l=n[r];for(let s of l){if(a instanceof Event&&a.defaultPrevented)return;s(a,...o)}}});return t}function At(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function rr(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let ar=0;function or(){return++ar}function vt(){return or()}var Pt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Pt||{});function B(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let Nt=Symbol("Context");var ee=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ee||{});function lr(){return ht()!==null}function ht(){return ae(Nt,null)}function sr(e){se(Nt,e)}var ir=Object.defineProperty,ur=(e,t,n)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wt=(e,t,n)=>(ur(e,typeof t!="symbol"?t+"":t,n),n);class dr{constructor(){wt(this,"current",this.detect()),wt(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}let Ue=new dr;function Me(e){if(Ue.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=B(e);if(t)return t.ownerDocument}return document}let ot=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var fe=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(fe||{}),Ht=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Ht||{}),cr=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(cr||{});function fr(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ot)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var jt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(jt||{});function pr(e,t=0){var n;return e===((n=Me(e))==null?void 0:n.body)?!1:ie(t,{0(){return e.matches(ot)},1(){let r=e;for(;r!==null;){if(r.matches(ot))return!0;r=r.parentElement}return!1}})}var mr=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(mr||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function we(e){e==null||e.focus({preventScroll:!0})}let vr=["textarea","input"].join(",");function hr(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,vr))!=null?n:!1}function gr(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),o=t(r);if(a===null||o===null)return 0;let l=a.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function qe(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){var o;let l=(o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?o:document,s=Array.isArray(e)?n?gr(e):e:fr(e);a.length>0&&s.length>1&&(s=s.filter(g=>!a.includes(g))),r=r??l.activeElement;let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},h=0,$=s.length,v;do{if(h>=$||h+$<=0)return 0;let g=i+h;if(t&16)g=(g+$)%$;else{if(g<0)return 3;if(g>=$)return 1}v=s[g],v==null||v.focus(m),h+=u}while(v!==l.activeElement);return t&6&&hr(v)&&v.select(),2}function We(e,t,n){Ue.isServer||oe(r=>{document.addEventListener(e,t,n),r(()=>document.removeEventListener(e,t,n))})}function Rt(e,t,n){Ue.isServer||oe(r=>{window.addEventListener(e,t,n),r(()=>window.removeEventListener(e,t,n))})}function yr(e,t,n=C(()=>!0)){function r(o,l){if(!n.value||o.defaultPrevented)return;let s=l(o);if(s===null||!s.getRootNode().contains(s))return;let u=function i(m){return typeof m=="function"?i(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let i of u){if(i===null)continue;let m=i instanceof HTMLElement?i:B(i);if(m!=null&&m.contains(s)||o.composed&&o.composedPath().includes(m))return}return!pr(s,jt.Loose)&&s.tabIndex!==-1&&o.preventDefault(),t(o,s)}let a=T(null);We("pointerdown",o=>{var l,s;n.value&&(a.value=((s=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:s[0])||o.target)},!0),We("mousedown",o=>{var l,s;n.value&&(a.value=((s=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:s[0])||o.target)},!0),We("click",o=>{a.value&&(r(o,()=>a.value),a.value=null)},!0),We("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Rt("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Je=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Je||{});let lt=N({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{let{features:r,...a}=e,o={"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return de({ourProps:o,theirProps:a,slot:{},attrs:n,slots:t,name:"Hidden"})}}});function br(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function gt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Be(){let e=[],t={addEventListener(n,r,a,o){return n.addEventListener(r,a,o),t.add(()=>n.removeEventListener(r,a,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return gt(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Be();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}var Ne=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ne||{});function $r(){let e=T(0);return Rt("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function Ut(e,t,n,r){Ue.isServer||oe(a=>{e=e??window,e.addEventListener(t,n,r),a(()=>e.removeEventListener(t,n,r))})}function wr(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function Bt(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let r=B(n);r instanceof HTMLElement&&t.add(r)}return t}var Vt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Vt||{});let Ae=Object.assign(N({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:T(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let a=T(null);r({el:a,$el:a});let o=C(()=>Me(a)),l=T(!1);ne(()=>l.value=!0),ue(()=>l.value=!1),Sr({ownerDocument:o},C(()=>l.value&&!!(e.features&16)));let s=Er({ownerDocument:o,container:a,initialFocus:C(()=>e.initialFocus)},C(()=>l.value&&!!(e.features&2)));Cr({ownerDocument:o,container:a,containers:e.containers,previousActiveElement:s},C(()=>l.value&&!!(e.features&8)));let u=$r();function i(v){let g=B(a);g&&(D=>D())(()=>{ie(u.value,{[Ne.Forwards]:()=>{qe(g,fe.First,{skipElements:[v.relatedTarget]})},[Ne.Backwards]:()=>{qe(g,fe.Last,{skipElements:[v.relatedTarget]})}})})}let m=T(!1);function h(v){v.key==="Tab"&&(m.value=!0,requestAnimationFrame(()=>{m.value=!1}))}function $(v){if(!l.value)return;let g=Bt(e.containers);B(a)instanceof HTMLElement&&g.add(B(a));let D=v.relatedTarget;D instanceof HTMLElement&&D.dataset.headlessuiFocusGuard!=="true"&&(It(g,D)||(m.value?qe(B(a),ie(u.value,{[Ne.Forwards]:()=>fe.Next,[Ne.Backwards]:()=>fe.Previous})|fe.WrapAround,{relativeTo:v.target}):v.target instanceof HTMLElement&&we(v.target)))}return()=>{let v={},g={ref:a,onKeydown:h,onFocusout:$},{features:D,initialFocus:M,containers:Z,...j}=e;return G(Ce,[!!(D&4)&&G(lt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:i,features:Je.Focusable}),de({ourProps:g,theirProps:{...t,...j},slot:v,attrs:t,slots:n,name:"FocusTrap"}),!!(D&4)&&G(lt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:i,features:Je.Focusable})])}}}),{features:Vt}),be=[];wr(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&be[0]!==t.target&&(be.unshift(t.target),be=be.filter(n=>n!=null&&n.isConnected),be.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function _r(e){let t=T(be.slice());return je([e],([n],[r])=>{r===!0&&n===!1?gt(()=>{t.value.splice(0)}):r===!1&&n===!0&&(t.value=be.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(r=>r!=null&&r.isConnected))!=null?n:null}}function Sr({ownerDocument:e},t){let n=_r(t);ne(()=>{oe(()=>{var r,a;t.value||((r=e.value)==null?void 0:r.activeElement)===((a=e.value)==null?void 0:a.body)&&we(n())},{flush:"post"})}),ue(()=>{t.value&&we(n())})}function Er({ownerDocument:e,container:t,initialFocus:n},r){let a=T(null),o=T(!1);return ne(()=>o.value=!0),ue(()=>o.value=!1),ne(()=>{je([t,n,r],(l,s)=>{if(l.every((i,m)=>(s==null?void 0:s[m])===i)||!r.value)return;let u=B(t);u&&gt(()=>{var i,m;if(!o.value)return;let h=B(n),$=(i=e.value)==null?void 0:i.activeElement;if(h){if(h===$){a.value=$;return}}else if(u.contains($)){a.value=$;return}h?we(h):qe(u,fe.First|fe.NoScroll)===Ht.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.value=(m=e.value)==null?void 0:m.activeElement})},{immediate:!0,flush:"post"})}),a}function Cr({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){var o;Ut((o=e.value)==null?void 0:o.defaultView,"focus",l=>{if(!a.value)return;let s=Bt(n);B(t)instanceof HTMLElement&&s.add(B(t));let u=r.value;if(!u)return;let i=l.target;i&&i instanceof HTMLElement?It(s,i)?(r.value=i,we(i)):(l.preventDefault(),l.stopPropagation(),we(u)):we(r.value)},!0)}function It(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let tt=new Map,Pe=new Map;function _t(e,t=T(!0)){oe(n=>{var r;if(!t.value)return;let a=B(e);if(!a)return;n(function(){var l;if(!a)return;let s=(l=Pe.get(a))!=null?l:1;if(s===1?Pe.delete(a):Pe.set(a,s-1),s!==1)return;let u=tt.get(a);u&&(u["aria-hidden"]===null?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",u["aria-hidden"]),a.inert=u.inert,tt.delete(a))});let o=(r=Pe.get(a))!=null?r:0;Pe.set(a,o+1),o===0&&(tt.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),a.setAttribute("aria-hidden","true"),a.inert=!0)})}let Wt=Symbol("ForcePortalRootContext");function Dr(){return ae(Wt,!1)}let St=N({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return se(Wt,e.force),()=>{let{force:r,...a}=e;return de({theirProps:a,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}});function Tr(e){let t=Me(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}let Or=N({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=T(null),a=C(()=>Me(r)),o=Dr(),l=ae(Yt,null),s=T(o===!0||l==null?Tr(r.value):l.resolveTarget());oe(()=>{o||l!=null&&(s.value=l.resolveTarget())});let u=ae(st,null);return ne(()=>{let i=B(r);i&&u&&ue(u.register(i))}),ue(()=>{var i,m;let h=(i=a.value)==null?void 0:i.getElementById("headlessui-portal-root");h&&s.value===h&&s.value.children.length<=0&&((m=s.value.parentElement)==null||m.removeChild(s.value))}),()=>{if(s.value===null)return null;let i={ref:r,"data-headlessui-portal":""};return G(pn,{to:s.value},de({ourProps:i,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),st=Symbol("PortalParentContext");function xr(){let e=ae(st,null),t=T([]);function n(o){return t.value.push(o),e&&e.register(o),()=>r(o)}function r(o){let l=t.value.indexOf(o);l!==-1&&t.value.splice(l,1),e&&e.unregister(o)}let a={register:n,unregister:r,portals:t};return[t,N({name:"PortalWrapper",setup(o,{slots:l}){return se(st,a),()=>{var s;return(s=l.default)==null?void 0:s.call(l)}}})]}let Yt=Symbol("PortalGroupContext"),Lr=N({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=xt({resolveTarget(){return e.target}});return se(Yt,r),()=>{let{target:a,...o}=e;return de({theirProps:o,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}}),Kt=Symbol("StackContext");var it=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(it||{});function Mr(){return ae(Kt,()=>{})}function kr({type:e,enabled:t,element:n,onUpdate:r}){let a=Mr();function o(...l){r==null||r(...l),a(...l)}ne(()=>{je(t,(l,s)=>{l?o(0,e,n):s===!0&&o(1,e,n)},{immediate:!0,flush:"sync"})}),ue(()=>{t.value&&o(1,e,n)}),se(Kt,o)}let Fr=Symbol("DescriptionContext");function Ar({slot:e=T({}),name:t="Description",props:n={}}={}){let r=T([]);function a(o){return r.value.push(o),()=>{let l=r.value.indexOf(o);l!==-1&&r.value.splice(l,1)}}return se(Fr,{register:a,slot:e,name:t,props:n}),C(()=>r.value.length>0?r.value.join(" "):void 0)}function Pr(e){let t=mn(e.getSnapshot());return ue(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function Nr(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...o){let l=t[a].call(n,...o);l&&(n=l,r.forEach(s=>s()))}}}function Hr(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,o=e-a;n.style(r,"paddingRight",`${o}px`)}}}function jr(){if(!br())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:r}){function a(l){return r.containers.flatMap(s=>s()).some(s=>s.contains(l))}if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=Be();l.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>l.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let o=null;n.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let s=l.target.closest("a");if(!s)return;let{hash:u}=new URL(s.href),i=t.querySelector(u);i&&!a(i)&&(o=i)}catch{}},!0),n.addEventListener(t,"touchmove",l=>{l.target instanceof HTMLElement&&!a(l.target)&&l.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})}}}function Rr(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Ur(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let $e=Nr(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Be(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:Ur(n)},a=[jr(),Hr(),Rr()];a.forEach(({before:o})=>o==null?void 0:o(r)),a.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});$e.subscribe(()=>{let e=$e.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&$e.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&$e.dispatch("TEARDOWN",n)}});function Br(e,t,n){let r=Pr($e),a=C(()=>{let o=e.value?r.value.get(e.value):void 0;return o?o.count>0:!1});return je([e,t],([o,l],[s],u)=>{if(!o||!l)return;$e.dispatch("PUSH",o,n);let i=!1;u(()=>{i||($e.dispatch("POP",s??o,n),i=!0)})},{immediate:!0}),a}function Vr({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let r=T(null),a=Me(r);function o(){var l;let s=[];for(let u of e)u!==null&&(u instanceof HTMLElement?s.push(u):"value"in u&&u.value instanceof HTMLElement&&s.push(u.value));if(t!=null&&t.value)for(let u of t.value)s.push(u);for(let u of(l=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(B(r))||s.some(i=>u.contains(i))||s.push(u));return s}return{resolveContainers:o,contains(l){return o().some(s=>s.contains(l))},mainTreeNodeRef:r,MainTreeNode(){return n!=null?null:G(lt,{features:Je.Hidden,ref:r})}}}var Ir=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ir||{});let ut=Symbol("DialogContext");function qt(e){let t=ae(ut,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qt),n}return t}let Ye="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Wr=N({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Ye},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${vt()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:a}){var o;let l=T(!1);ne(()=>{l.value=!0});let s=T(0),u=ht(),i=C(()=>e.open===Ye&&u!==null?(u.value&ee.Open)===ee.Open:e.open),m=T(null),h=C(()=>Me(m));if(a({el:m,$el:m}),!(e.open!==Ye||u!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof i.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${i.value===Ye?void 0:e.open}`);let $=C(()=>l.value&&i.value?0:1),v=C(()=>$.value===0),g=C(()=>s.value>1),D=ae(ut,null)!==null,[M,Z]=xr(),{resolveContainers:j,mainTreeNodeRef:q,MainTreeNode:le}=Vr({portals:M,defaultContainers:[C(()=>{var c;return(c=F.panelRef.value)!=null?c:m.value})]}),z=C(()=>g.value?"parent":"leaf"),V=C(()=>u!==null?(u.value&ee.Closing)===ee.Closing:!1),Y=C(()=>D||V.value?!1:v.value),U=C(()=>{var c,d,y;return(y=Array.from((d=(c=h.value)==null?void 0:c.querySelectorAll("body > *"))!=null?d:[]).find(b=>b.id==="headlessui-portal-root"?!1:b.contains(B(q))&&b instanceof HTMLElement))!=null?y:null});_t(U,Y);let k=C(()=>g.value?!0:v.value),E=C(()=>{var c,d,y;return(y=Array.from((d=(c=h.value)==null?void 0:c.querySelectorAll("[data-headlessui-portal]"))!=null?d:[]).find(b=>b.contains(B(q))&&b instanceof HTMLElement))!=null?y:null});_t(E,k),kr({type:"Dialog",enabled:C(()=>$.value===0),element:m,onUpdate:(c,d)=>{if(d==="Dialog")return ie(c,{[it.Add]:()=>s.value+=1,[it.Remove]:()=>s.value-=1})}});let S=Ar({name:"DialogDescription",slot:C(()=>({open:i.value}))}),X=T(null),F={titleId:X,panelRef:T(null),dialogState:$,setTitleId(c){X.value!==c&&(X.value=c)},close(){t("close",!1)}};se(ut,F);let w=C(()=>!(!v.value||g.value));yr(j,(c,d)=>{F.close(),vn(()=>d==null?void 0:d.focus())},w);let p=C(()=>!(g.value||$.value!==0));Ut((o=h.value)==null?void 0:o.defaultView,"keydown",c=>{p.value&&(c.defaultPrevented||c.key===Pt.Escape&&(c.preventDefault(),c.stopPropagation(),F.close()))});let f=C(()=>!(V.value||$.value!==0||D));return Br(h,f,c=>{var d;return{containers:[...(d=c.containers)!=null?d:[],j]}}),oe(c=>{if($.value!==0)return;let d=B(m);if(!d)return;let y=new ResizeObserver(b=>{for(let x of b){let L=x.target.getBoundingClientRect();L.x===0&&L.y===0&&L.width===0&&L.height===0&&F.close()}});y.observe(d),c(()=>y.disconnect())}),()=>{let{id:c,open:d,initialFocus:y,...b}=e,x={...n,ref:m,id:c,role:"dialog","aria-modal":$.value===0?!0:void 0,"aria-labelledby":X.value,"aria-describedby":S.value},L={open:$.value===0};return G(St,{force:!0},()=>[G(Or,()=>G(Lr,{target:m.value},()=>G(St,{force:!1},()=>G(Ae,{initialFocus:y,containers:j,features:v.value?ie(z.value,{parent:Ae.features.RestoreFocus,leaf:Ae.features.All&~Ae.features.FocusLock}):Ae.features.None},()=>G(Z,{},()=>de({ourProps:x,theirProps:{...b,...n},slot:L,attrs:n,slots:r,visible:$.value===0,features:Ge.RenderStrategy|Ge.Static,name:"Dialog"})))))),G(le)])}}}),Yr=N({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${vt()}`}},setup(e,{attrs:t,slots:n,expose:r}){let a=qt("DialogPanel");r({el:a.panelRef,$el:a.panelRef});function o(l){l.stopPropagation()}return()=>{let{id:l,...s}=e,u={id:l,ref:a.panelRef,onClick:o};return de({ourProps:u,theirProps:s,slot:{open:a.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}});function Kr(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function nt(e,...t){e&&t.length>0&&e.classList.add(...t)}function Ke(e,...t){e&&t.length>0&&e.classList.remove(...t)}var dt=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(dt||{});function qr(e,t){let n=Be();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:a}=getComputedStyle(e),[o,l]=[r,a].map(s=>{let[u=0]=s.split(",").filter(Boolean).map(i=>i.includes("ms")?parseFloat(i):parseFloat(i)*1e3).sort((i,m)=>m-i);return u});return o!==0?n.setTimeout(()=>t("finished"),o+l):t("finished"),n.add(()=>t("cancelled")),n.dispose}function Et(e,t,n,r,a,o){let l=Be(),s=o!==void 0?Kr(o):()=>{};return Ke(e,...a),nt(e,...t,...n),l.nextFrame(()=>{Ke(e,...n),nt(e,...r),l.add(qr(e,u=>(Ke(e,...r,...t),nt(e,...a),s(u))))}),l.add(()=>Ke(e,...t,...n,...r,...a)),l.add(()=>s("cancelled")),l.dispose}function ye(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let yt=Symbol("TransitionContext");var zr=(e=>(e.Visible="visible",e.Hidden="hidden",e))(zr||{});function Gr(){return ae(yt,null)!==null}function Jr(){let e=ae(yt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Qr(){let e=ae(bt,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let bt=Symbol("NestingContext");function Ze(e){return"children"in e?Ze(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function zt(e){let t=T([]),n=T(!1);ne(()=>n.value=!0),ue(()=>n.value=!1);function r(o,l=ve.Hidden){let s=t.value.findIndex(({id:u})=>u===o);s!==-1&&(ie(l,{[ve.Unmount](){t.value.splice(s,1)},[ve.Hidden](){t.value[s].state="hidden"}}),!Ze(t)&&n.value&&(e==null||e()))}function a(o){let l=t.value.find(({id:s})=>s===o);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:o,state:"visible"}),()=>r(o,ve.Unmount)}return{children:t,register:a,unregister:r}}let Gt=Ge.RenderStrategy,Jt=N({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:a}){let o=T(0);function l(){o.value|=ee.Opening,t("beforeEnter")}function s(){o.value&=~ee.Opening,t("afterEnter")}function u(){o.value|=ee.Closing,t("beforeLeave")}function i(){o.value&=~ee.Closing,t("afterLeave")}if(!Gr()&&lr())return()=>G(Qt,{...e,onBeforeEnter:l,onAfterEnter:s,onBeforeLeave:u,onAfterLeave:i},r);let m=T(null),h=C(()=>e.unmount?ve.Unmount:ve.Hidden);a({el:m,$el:m});let{show:$,appear:v}=Jr(),{register:g,unregister:D}=Qr(),M=T($.value?"visible":"hidden"),Z={value:!0},j=vt(),q={value:!1},le=zt(()=>{!q.value&&M.value!=="hidden"&&(M.value="hidden",D(j),i())});ne(()=>{let F=g(j);ue(F)}),oe(()=>{if(h.value===ve.Hidden&&j){if($.value&&M.value!=="visible"){M.value="visible";return}ie(M.value,{hidden:()=>D(j),visible:()=>g(j)})}});let z=ye(e.enter),V=ye(e.enterFrom),Y=ye(e.enterTo),U=ye(e.entered),k=ye(e.leave),E=ye(e.leaveFrom),S=ye(e.leaveTo);ne(()=>{oe(()=>{if(M.value==="visible"){let F=B(m);if(F instanceof Comment&&F.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function X(F){let w=Z.value&&!v.value,p=B(m);!p||!(p instanceof HTMLElement)||w||(q.value=!0,$.value&&l(),$.value||u(),F($.value?Et(p,z,V,Y,U,f=>{q.value=!1,f===dt.Finished&&s()}):Et(p,k,E,S,U,f=>{q.value=!1,f===dt.Finished&&(Ze(le)||(M.value="hidden",D(j),i()))})))}return ne(()=>{je([$],(F,w,p)=>{X(p),Z.value=!1},{immediate:!0})}),se(bt,le),sr(C(()=>ie(M.value,{visible:ee.Open,hidden:ee.Closed})|o.value)),()=>{let{appear:F,show:w,enter:p,enterFrom:f,enterTo:c,entered:d,leave:y,leaveFrom:b,leaveTo:x,...L}=e,R={ref:m},I={...L,...v.value&&$.value&&Ue.isServer?{class:J([n.class,L.class,...z,...V])}:{}};return de({theirProps:I,ourProps:R,slot:{},slots:r,attrs:n,features:Gt,visible:M.value==="visible",name:"TransitionChild"})}}}),Zr=Jt,Qt=N({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r}){let a=ht(),o=C(()=>e.show===null&&a!==null?(a.value&ee.Open)===ee.Open:e.show);oe(()=>{if(![!0,!1].includes(o.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=T(o.value?"visible":"hidden"),s=zt(()=>{l.value="hidden"}),u=T(!0),i={show:o,appear:C(()=>e.appear||!u.value)};return ne(()=>{oe(()=>{u.value=!1,o.value?l.value="visible":Ze(s)||(l.value="hidden")})}),se(bt,s),se(yt,i),()=>{let m=At(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),h={unmount:e.unmount};return de({ourProps:{...h,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[G(Zr,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...h,...m},r.default)]},attrs:{},features:Gt,visible:l.value==="visible",name:"Transition"})}}});const Xr=pt(ze.ui.strategy,ze.ui.slideover,Zn),ea=N({components:{HDialog:Wr,HDialogPanel:Yr,TransitionRoot:Qt,TransitionChild:Jt},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const{ui:n,attrs:r}=Mt("slideover",at(e,"ui"),Xr,at(e,"class")),a=C({get(){return e.modelValue},set(s){t("update:modelValue",s)}}),o=C(()=>e.transition?{...n.value.transition,enterFrom:e.side==="left"?"-translate-x-full":"translate-x-full",enterTo:"translate-x-0",leaveFrom:"translate-x-0",leaveTo:e.side==="left"?"-translate-x-full":"translate-x-full"}:{});function l(s){a.value=s,t("close")}return{ui:n,attrs:r,isOpen:a,transitionClass:o,close:l}}});function ta(e,t,n,r,a,o){const l=Ie("TransitionChild"),s=Ie("HDialogPanel"),u=Ie("HDialog"),i=Ie("TransitionRoot");return O(),Ee(i,{as:"template",appear:e.appear,show:e.isOpen},{default:H(()=>[A(u,pe({class:[e.ui.wrapper,{"justify-end":e.side==="right"}]},e.attrs,{onClose:t[0]||(t[0]=m=>!e.preventClose&&e.close(m))}),{default:H(()=>[e.overlay?(O(),Ee(l,pe({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:H(()=>[W("div",{class:J([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):Le("",!0),A(l,pe({as:"template",appear:e.appear},e.transitionClass),{default:H(()=>[A(s,{class:J([e.ui.base,e.ui.width,e.ui.background,e.ui.ring,e.ui.padding])},{default:H(()=>[re(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])]),_:3},16,["class"])]),_:3},8,["appear","show"])}const na=Qe(ea,[["render",ta]]),ra=N({__name:"Slideover",setup(e){const t=Re(),n=C({get:()=>t.isOpen,set:r=>{t.isOpen=r}});return(r,a)=>{const o=In,l=Jn,s=nr,u=na;return O(),P("div",null,[A(u,{modelValue:_(n),"onUpdate:modelValue":a[0]||(a[0]=i=>xe(n)?n.value=i:null),class:"ml-12"},{default:H(()=>[A(s,{class:"flex flex-col flex-1 overflow-y-auto",ui:{body:{base:"flex-1"},ring:"",divide:"divide-y divide-border"}},{header:H(()=>[A(o)]),default:H(()=>[A(l)]),_:1})]),_:1},8,["modelValue"])])}}}),aa=(e,t=1)=>({backgroundColor:`hsla(280, 52%, ${100-e/(t-1)*50}%, 30%)`});var Oe=(e=>(e.todo="todo",e["to-be-agreed"]="to-be-agreed",e["in-progress"]="in-progress",e.produced="produced",e.done="done",e))(Oe||{});const oa=[{id:Oe.todo,name:"To do",items:[]},{id:Oe["to-be-agreed"],name:"To be agreed",items:[]},{id:Oe["in-progress"],name:"In progress",items:[]},{id:Oe.produced,name:"Produced",items:[]},{id:Oe.done,name:"Done",items:[]}];function la(){return ft({queryKey:["deals"],queryFn:()=>_e.listDocuments(Se,He),select(e){var r;const t=oa.map(a=>({...a,items:[]})),n=e.documents;for(const a of n){const o=t.find(l=>l.id===a.status);o&&o.items.push({$createdAt:a.$createdAt,id:a.$id,name:a==null?void 0:a.name,price:a==null?void 0:a.price,companyName:(r=a==null?void 0:a.customers)==null?void 0:r.name,status:o==null?void 0:o.name})}return t}})}const sa={class:"p-10"},ia=W("h1",{class:"font-bold text-2xl mb-10 lg:text-start text-center"}," CatalystCRM ",-1),ua={key:0},da={key:1},ca={class:"flex lg:justify-between justify-center lg:gap-x-8 gap-x-6 lg:gap-y-8 gap-y-4 flex-wrap"},fa=["onDrop"],pa=W("div",null,"Company",-1),ma=["disabled","onClick"],Ea=N({__name:"index",setup(e){bn(),$n();const t=xt({});yn({title:"Home | CatalystCRM System"});const n=T(null),r=T(null),{data:a,isLoading:o,refetch:l}=la(),s=Re(),{mutate:u}=ct({mutationKey:["move card"],mutationFn:({docId:v,status:g})=>_e.updateDocument(Se,He,v,{status:g}),onSuccess:()=>{l()}});function i(v,g){n.value=v,r.value=g}function m(v){v.preventDefault()}function h(v){n.value&&r.value&&u({docId:n.value.id,status:v.id})}async function $(v){try{t[v]=!0,await _e.deleteDocument(Se,He,v),l()}catch(g){console.error("Error deleting document:",g)}finally{t[v]=!1}}return(v,g)=>{const D=Tn,M=Mn,Z=kn,j=Ln,q=Fn,le=An,z=xn,V=ra;return O(),P("div",sa,[ia,_(o)?(O(),P("div",ua,"Loading...")):(O(),P("div",da,[W("div",ca,[(O(!0),P(Ce,null,rt(_(a),(Y,U)=>{var k;return O(),P("div",{key:Y.id,onDragover:m,onDrop:()=>h(Y),class:"w-48"},[W("div",{class:"rounded bg-slate-700 py-1 px-5 mb-2 text-center",style:hn(_(aa)(U,(k=_(a))==null?void 0:k.length))},K(Y.name),5),W("div",null,[A(D,{refetch:_(l),status:Y.id},null,8,["refetch","status"]),(O(!0),P(Ce,null,rt(Y.items,E=>(O(),Ee(z,{key:E.id,class:"mb-5 w-48",draggable:"true",onDragstart:()=>i(E,Y)},{default:H(()=>[A(j,{role:"button",onClick:S=>_(s).set(E)},{default:H(()=>[A(M,null,{default:H(()=>[me(K(E.name),1)]),_:2},1024),A(Z,{class:"mt-2 block"},{default:H(()=>[me(" $"+K(E.price),1)]),_:2},1024)]),_:2},1032,["onClick"]),A(q,{class:"text-xs",role:"button",onClick:S=>_(s).set(E)},{default:H(()=>[pa,me(" "+K(E.companyName),1)]),_:2},1032,["onClick"]),A(le,{class:"grid gap-2"},{default:H(()=>[W("span",null,K(_(mt)(E.$createdAt).format("DD MMMM YYYY")),1),W("button",{type:"button",class:"relative z-[3] mt-2 border border-foreground rounded-md py-1 px-2 transition-all hover:text-primary hover:border-primary",disabled:_(t)[E.id],onClick:gn(S=>$(E.id),["prevent"])},K(_(t)[E.id]?"Deleting...":"Delete"),9,ma)]),_:2},1024)]),_:2},1032,["onDragstart"]))),128))])],40,fa)}),128))]),A(V)]))])}}});export{Ea as default};
